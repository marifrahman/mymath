<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>ICAS Year 4 – Paper C (New Set)</title>
<style>
  body{font-family:Arial,Helvetica,sans-serif;margin:0;padding:20px;background:#f7f7f7}
  h1{text-align:center;font-size:1.6rem}
  #timer{position:sticky;top:0;background:#fff;border-bottom:1px solid #ccc;padding:8px;text-align:center;font-weight:bold;font-size:1.2rem;z-index:10}
  form{max-width:720px;margin:auto;background:#fff;padding:20px;border-radius:8px;box-shadow:0 0 5px rgba(0,0,0,.1)}
  .q{margin-bottom:18px;border-bottom:1px solid #eee;padding-bottom:12px}
  .q p{margin:0 0 6px;font-weight:bold}
  label{display:block;margin:4px 0;font-size:0.95rem}
  button{display:block;margin:20px auto;padding:10px 25px;font-size:1rem;border:none;border-radius:4px;cursor:pointer}
  #submitBtn{background:#007bff;color:#fff}
  #shareBtn{background:#28a745;color:#fff}
  #results{display:none;margin:20px auto;max-width:700px;background:#fff;padding:20px;border-radius:8px}
  #results h2{margin-top:0}
  .correct{color:green}
  .wrong{color:red}
  @media(max-width:600px){body{padding:10px}h1{font-size:1.3rem}}
</style>
</head>
<body>

<h1>ICAS Year 4 – Paper C (New Question Set)</h1>

<div id="timer">Time left: 45:00</div>

<form id="quizForm">
  <!-- questions injected by JS -->
</form>

<button id="submitBtn" onclick="finishQuiz()">Finish & Review</button>

<div id="results"></div>
<button id="shareBtn" style="display:none" onclick="shareResults()">📸 Screenshot & Share via Email</button>

<!-- html2canvas CDN -->
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script>
/* ============  QUESTION BANK  ============ */
const questions = [
{q:"What is 8 642 rounded to the nearest hundred?",choices:["8 600","8 640","8 700","8 740"],ans:0},
{q:"Which fraction is smallest?",choices:["2/3","3/4","5/8","7/10"],ans:2},
{q:"A box holds 48 chocolates shared equally among 6 friends. How many does each get?",choices:["6","7","8","9"],ans:2},
{q:"How many grams in 4.25 kg?",choices:["425","4 025","4 250","42 500"],ans:2},
{q:"Which number sentence is true?",choices:["0.4 = 0.40","0.4 > 0.44","0.04 = 0.4","0.04 > 0.4"],ans:0},
{q:"The time 13:50 is the same as",choices:["1:50 a.m.","1:50 p.m.","3:50 p.m.","11:50 p.m."],ans:1},
{q:"A rectangle has length 12 cm and width 7 cm. Its perimeter is",choices:["38 cm","84 cm","19 cm","26 cm"],ans:0},
{q:"What is the next number in 2, 5, 10, 17, 26, … ?",choices:["35","36","37","38"],ans:2},
{q:"Which solid has exactly 2 faces that are circles?",choices:["sphere","cone","cylinder","cube"],ans:2},
{q:"Which angle is reflex?",choices:["90°","135°","180°","270°"],ans:3},
{q:"A pie chart shows 1/3 of children chose red. If 12 chose red, how many children total?",choices:["24","30","36","48"],ans:2},
{q:"5 × 7 + 3 × 4 =",choices:["38","41","47","59"],ans:2},
{q:"How many edges does a triangular prism have?",choices:["6","9","12","15"],ans:1},
{q:"Which number is exactly halfway between 2 600 and 3 000?",choices:["2 700","2 800","2 850","2 900"],ans:1},
{q:"A train leaves every 25 minutes. If one leaves at 09:10, when is the next?",choices:["09:25","09:35","09:40","09:45"],ans:1},
{q:"Which of these is NOT a factor of 36?",choices:["4","6","8","9"],ans:2},
{q:"A shop offers “Buy 2 get 1 free”. If one toy costs $8, how much for 3 toys?",choices:["$16","$24","$20","$32"],ans:0},
{q:"Which set is in ascending order?",choices:["0.2, 0.05, 0.5","0.05, 0.2, 0.5","0.5, 0.2, 0.05","0.5, 0.05, 0.2"],ans:1},
{q:"A square has area 64 cm². One side is",choices:["6 cm","7 cm","8 cm","9 cm"],ans:2},
{q:"Which pattern uses the rule “multiply by 3 then subtract 1”?",choices:["1, 2, 5, 14","2, 5, 14, 41","1, 3, 8, 23","3, 8, 23, 68"],ans:1},
{q:"How many days are there in 7 weeks?",choices:["35","42","49","56"],ans:2},
{q:"The temperature falls from 5 °C to –2 °C. The change is",choices:["–7 °C","3 °C","7 °C","–3 °C"],ans:2},
{q:"Which of these numbers is prime?",choices:["51","53","55","57"],ans:1},
{q:"A bottle holds 2.5 L. After pouring 750 mL, how much is left (in mL)?",choices:["1 250","1 500","1 650","1 750"],ans:3},
{q:"A right-angled triangle has sides 3 cm and 4 cm at the right angle. What is the third side (hypotenuse) length?",choices:["5 cm","6 cm","7 cm","8 cm"],ans:0},
{q:"Which of these nets folds to make a square pyramid?",choices:["A","B","C","D"],ans:1},
{q:"Which transformation maps the letter N onto its mirror image?",choices:["slide","flip","turn","stretch"],ans:1},
{q:"The median of 11, 8, 15, 8, 20 is",choices:["8","11","15","20"],ans:1},
{q:"A spinner has 4 red, 3 blue and 1 green sector. What is the probability of landing on blue?",choices:["1/8","3/8","4/8","5/8"],ans:1},
{q:"A rectangle is drawn on 1 cm grid paper covering 28 squares. If length is 7 cm, the width is",choices:["3 cm","4 cm","5 cm","6 cm"],ans:1},
{q:"Which number is divisible by both 3 and 5?",choices:["35","45","55","65"],ans:1},
{q:"How many right angles does a rhombus have?",choices:["0","1","2","4"],ans:0},
{q:"A car uses 6 L per 100 km. How many litres for 250 km?",choices:["12 L","15 L","18 L","20 L"],ans:1},
{q:"Which 3-D shape has exactly 5 vertices?",choices:["triangular prism","square pyramid","cube","cone"],ans:1},
{q:"Which of these times is earliest?",choices:["09:45 a.m.","09:30 a.m.","10:00 a.m.","09:15 a.m."],ans:3},
{q:"A number divided by 8 gives 6 remainder 3. The number is",choices:["45","48","51","54"],ans:2},
{q:"Which decimal is equal to 7/20?",choices:["0.35","0.7","0.07","0.035"],ans:0},
{q:"Which of these is a reflex angle?",choices:["90°","135°","180°","200°"],ans:3},
{q:"The next term in 5, 9, 17, 33, 65, … is",choices:["127","129","131","133"],ans:1},
{q:"A clock shows 20 minutes past 7 in the evening. In 24-hour time this is",choices:["19:20","07:20","20:07","07:40"],ans:0},
{q:"A farmer packs 96 eggs into cartons of 12. How many cartons?",choices:["6","7","8","9"],ans:2},
{q:"A square and a rectangle have the same perimeter 36 cm. If the rectangle is 10 cm long, its width is",choices:["8 cm","9 cm","7 cm","6 cm"],ans:0}
];

/* ============  RENDER  ============ */
const form = document.getElementById('quizForm');
questions.forEach((q,i)=>{
  const div=document.createElement('div');
  div.className='q';
  div.innerHTML=`<p>Q${i+1}. ${q.q}</p>`+
    q.choices.map((c,j)=>`<label><input type="radio" name="q${i}" value="${j}"> ${c}</label>`).join('');
  form.appendChild(div);
});

/* ============  TIMER  ============ */
let timeLeft = 45*60;
const timerEl = document.getElementById('timer');
const countdown = setInterval(()=>{
  timeLeft--;
  const m = Math.floor(timeLeft/60), s = timeLeft%60;
  timerEl.textContent = `Time left: ${m}:${s.toString().padStart(2,'0')}`;
  if(timeLeft<=0){clearInterval(countdown); finishQuiz();}
},1000);

/* ============  FINISH & SCORE  ============ */
function finishQuiz(){
  clearInterval(countdown);
  let score=0;
  const resultsDiv = document.getElementById('results');
  let html = `<h2>Your Score: `;
  questions.forEach((q,i)=>{
    const chosen = form[`q${i}`].value === "" ? -1 : Number(form[`q${i}`].value);
    const correct = q.ans;
    const isRight = chosen === correct;
    if(isRight) score++;
    html += `<div class="${isRight?'correct':'wrong'}">
               Q${i+1}: ${isRight?'correct':'wrong'}
               ${!isRight ? `(correct: ${q.choices[q.ans]})` : ''}
             </div>`;
  });
  html = `<h2>Your Score: ${score}/40</h2>` + html;
  resultsDiv.innerHTML = html;
  resultsDiv.style.display='block';
  form.style.display='none';
  document.getElementById('submitBtn').style.display='none';
  document.getElementById('shareBtn').style.display='block';
}

/* ============  SCREENSHOT + EMAIL  ============ */
async function shareResults(){
  const canvas = await html2canvas(document.getElementById('results'),{backgroundColor:'#fff'});
  canvas.toBlob(blob=>{
    const file = new File([blob],'icas-results.png',{type:'png'});
    const url = URL.createObjectURL(file);
    const subject = encodeURIComponent('ICAS Year 4 Practice Results');
    const body = encodeURIComponent('Hi,\n\nPlease find my ICAS practice score attached.\n\nRegards');
    const mailLink = `mailto:?subject=${subject}&body=${body}&attachment=${url}`;
    // Browsers ignore attachment param; fallback: download manually
    const a = document.createElement('a');
    a.href = url;
    a.download = 'icas-results.png';
    a.click();
    alert('Screenshot downloaded. You can now attach it to your e-mail.');
  });
}
</script>
</body>
</html>
